<!doctype html>
<html>
  <head>
    <meta content='Collecting Twitter Data using Linq2Twitter - Amir Razmjou' property='og:title' />
    <title>Collecting Twitter Data using Linq2Twitter - Amir Razmjou</title>
    <!-- Charset and Facebook Like link-->
	<meta content='text/html; charset=utf-8' http-equiv='content-type' />
	<meta content="419725124863594" property="fb:app_id" />
	<!-- http://t.co/dKP3o1e -->
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
<!-- Custom Meta Content -->
	<meta name="description" content="Thinking in Lamndas">
	
		<meta content='http://www.amirrazmjou.net/2014/01/24/collecting-twitter-data-linq2twitter/' property='og:url' />
		<meta content="I decided to use C# and LinqToTwitter library along with MongoDB. I chose C# since it’s pretty fun to have to have dy..." property='og:description' />
		<meta content="article" property="og:type" />
		
<!-- /Custom Meta Content -->
<!-- Viewport and device width -->
	<meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'>
	<meta name="apple-mobile-web-app-capable" content="yes">
<!-- Windows 8 / RT -->
	<meta name="msapplication-TileImage" content="images/apple-touch-icon-144x144-precomposed.png">
	<meta name="msapplication-TileColor" content="#000">
	<meta http-equiv="cleartype" content="on">
	<link href='http://www.amirrazmjou.net/images/favicon.png' rel='shortcut icon'>
<!-- Main Stylesheet -->
	<link href='http://www.amirrazmjou.net/stylesheets/style.min.css' rel='stylesheet' type='text/css' />
<!-- Syntax Highlight Stylesheet -->
	<link href='http://www.amirrazmjou.net/stylesheets/github.min.css' rel='stylesheet' type='text/css' />
<!-- Main Theme Stylesheet -->
	<link href='http://www.amirrazmjou.net/stylesheets/theme.min.css' rel='stylesheet' type='text/css' />
	<!--[if lt IE 9]>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js"></script>
	<![endif]-->
	<script>
		(function(d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return;
			js = d.createElement(s); js.id = id;
			js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=604714799556697";
			fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
	</script>

  </head>
  <body>
    <div class="container">
	<div class="row">
		<div class="col12">
			<nav class="nav-top">
				<ul class="menu-list" id="nav">
				
					<li>
						<a target="_top" href="/about">About</a>
					</li>
				
					<li>
						<a target="_top" href="/">Blog</a>
					</li>
				
					<li>
						<a target="_top" href="/projects">Projects</a>
					</li>
				
					<li>
						<a target="_blank" href="mailto:arazmjou2014@my.fit.edu">Contact</a>
					</li>
				
				</ul>
			</nav>
		</div>
	</div>
</div>

    <div class="container">
	<div class="row">
		<div class="col12">
			<header class="blog-title">
				<a class="back-to-home" href="/"><img src="http://www.amirrazmjou.net/images/lambda.png" alt="Amir Razmjou" width="140" height="140"></a>
				<h1>Amir Razmjou</h1>
				<p>Thinking in Lamndas</p>
			</header> 
		</div>
	</div>
</div>

    <div class='container'>
      <div class="row">
        <div class="col12">
          <section class='post'>
            <article class="post-entry">
              <span class='date'>24 Jan 2014</span>
              <span class="paging">
  
  
    <div class="right">
      <a class="to-top" href="/2014/08/01/sasa-jekyll-theme/" title="go ahead">
        ›
      </a>
    </div>
  
</span>
              <h1 class="post-title">
              Collecting Twitter Data using Linq2Twitter
              </h1>
              <p>I decided to use C# and LinqToTwitter library along with MongoDB. I chose C# since it’s pretty fun to have to have dynamism and imperative and function paradigms at the same time. I’m also tired of learning a new programming language.</p>

<div class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="kt">var</span> <span class="n">auth</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SingleUserAuthorizer</span>
<span class="p">{</span>
    <span class="n">CredentialStore</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SingleUserInMemoryCredentialStore</span>
    <span class="p">{</span>
        <span class="n">ConsumerKey</span> <span class="p">=</span> <span class="n">ConfigurationManager</span><span class="p">.</span><span class="n">AppSettings</span><span class="p">[</span><span class="s">&quot;twitterConsumerKey&quot;</span><span class="p">],</span>
        <span class="n">ConsumerSecret</span> <span class="p">=</span> <span class="n">ConfigurationManager</span><span class="p">.</span><span class="n">AppSettings</span><span class="p">[</span><span class="s">&quot;twitterConsumerSecret&quot;</span><span class="p">],</span>
        <span class="n">AccessToken</span> <span class="p">=</span> <span class="n">ConfigurationManager</span><span class="p">.</span><span class="n">AppSettings</span><span class="p">[</span><span class="s">&quot;twitterAccessToken&quot;</span><span class="p">],</span>
        <span class="n">AccessTokenSecret</span> <span class="p">=</span> <span class="n">ConfigurationManager</span><span class="p">.</span><span class="n">AppSettings</span><span class="p">[</span><span class="s">&quot;twitterAccessTokenSecret&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">twitterCtx</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TwitterContext</span><span class="p">(</span><span class="n">auth</span><span class="p">))</span>
<span class="p">{</span>
    <span class="n">twitterCtx</span><span class="p">.</span><span class="n">Log</span> <span class="p">=</span> <span class="n">Console</span><span class="p">.</span><span class="n">Out</span><span class="p">;</span>

    <span class="kt">var</span> <span class="n">searchResponse</span> <span class="p">=</span>
        <span class="p">(</span><span class="k">from</span> <span class="n">search</span> <span class="k">in</span> <span class="n">twitterCtx</span><span class="p">.</span><span class="n">Search</span>
         <span class="k">where</span> <span class="n">search</span><span class="p">.</span><span class="n">Type</span> <span class="p">==</span> <span class="n">SearchType</span><span class="p">.</span><span class="n">Search</span> <span class="p">&amp;&amp;</span>
         <span class="n">search</span><span class="p">.</span><span class="n">Query</span> <span class="p">==</span> <span class="s">&quot;\&quot;LINQ to Twitter\&quot;&quot;</span> 
         <span class="k">select</span> <span class="n">search</span><span class="p">)</span>
            <span class="p">.</span><span class="n">SingleOrDefault</span><span class="p">();</span>

    <span class="n">MongoServer</span> <span class="n">mongo</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MongoClient</span><span class="p">(</span><span class="n">_connectionString</span><span class="p">).</span><span class="n">GetServer</span><span class="p">();</span>
    <span class="n">mongo</span><span class="p">.</span><span class="n">Connect</span><span class="p">();</span>

    <span class="kt">var</span> <span class="n">db</span> <span class="p">=</span> <span class="n">mongo</span><span class="p">.</span><span class="n">GetDatabase</span><span class="p">(</span><span class="s">&quot;CiteTrack&quot;</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">collection</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="n">GetCollection</span><span class="p">(</span><span class="s">&quot;Tweets&quot;</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">searchResponse</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">searchResponse</span><span class="p">.</span><span class="n">Statuses</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">status</span> <span class="k">in</span> <span class="n">searchResponse</span><span class="p">.</span><span class="n">Statuses</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">collection</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">status</span><span class="p">.</span><span class="n">ToBsonDocument</span><span class="p">());</span>
          
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span>
                <span class="s">&quot;User: {0}, Tweet: {1}, Date: {2}&quot;</span><span class="p">,</span>
                <span class="n">status</span><span class="p">.</span><span class="n">User</span><span class="p">.</span><span class="n">ScreenName</span><span class="p">,</span>
                <span class="n">status</span><span class="p">.</span><span class="n">Text</span><span class="p">,</span> <span class="n">status</span><span class="p">.</span><span class="n">CreatedAt</span><span class="p">);</span>

        <span class="p">}</span>
    
    <span class="n">mongo</span><span class="p">.</span><span class="n">Disconnect</span><span class="p">();</span>

<span class="p">}</span></code></pre></div>

            <br />
<p>
  See you soon,<br/>
  <em>Amir Razmjou</em>
  <span>at 11:27</span>
</p>

            </article>            
          </section>
        </div>
      </div>
      

      
        <div class="block">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = "amirrazmjousfitblog"; 
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
      
    </div>
    <footer>
	<div class="container">
		<div class="row">
			<div class="col6">
				<div class="copyright">
					<!--Be nice and keep the copyright here! thanx.-->
					&copy; 2014 - Built with <a href="http://jekyllrb.com/">Jekyll</a> using <a href="http://www.newaeonweb.com.br/sasa">SASa Block-Grid!</a>
				</div>
			</div>
			<div class="col6">
				<nav class="social-links">
					<ul class="menu-list">
						
						<li>
							<a target="_blank" class="icon-github" href="http://github.com/arazmj">GitHub</a>
						</li>
						
						<li>
							<a target="_blank" class="icon-linkedin" href="http://www.linkedin.com/pub/amir-razmjou/19/98/972/en">Linkedin</a>
						</li>
						
						<li>
							<a target="_blank" class="icon-twitter" href="https://twitter.com/arazmj">Twitter</a>
						</li>
						
					</ul>
				</nav>
			</div>
		</div>
	</div>
</footer>
<!--Include JavaScript files at bottom-->
<script src='http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js'></script>
<script src='http://www.amirrazmjou.net/javascripts/jquery.min.js'></script>
<script src='http://www.amirrazmjou.net/javascripts/prettydate.min.js'></script>
<script src='http://www.amirrazmjou.net/javascripts/highlight.pack.js'></script>
<script src='http://www.amirrazmjou.net/javascripts/custom.min.js'></script>
<!--Init Sybtax Highlighter-->
<script>
$(document).ready(function() {
  $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
});
//hljs.initHighlightingOnLoad();
</script>
<!--Include Analytics, place your ID code on _config.yml file-->
<script>
  //<![CDATA[
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', '']);
    _gaq.push(['_trackPageview']);
    
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  //]]>
</script>
    <script>
      $(window).load(function () {
        $('html, body').animate({
          scrollTop: $(".post").offset().top
        }, 1000);
      });
    </script>
  </body>
</html>
